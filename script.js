const movies = {
    Action: [
        {
            id: 0,
            "title": "Avatar",
            "posterUrl": "https://m.media-amazon.com/images/M/MV5BZDA0OGQxNTItMDZkMC00N2UyLTg3MzMtYTJmNjg3Nzk5MzRiXkEyXkFqcGdeQXVyMjUzOTY1NTc@._V1_.jpg",
        },
        {
            id: 1,
            "title": "The Avengers",
            "posterUrl": "https://m.media-amazon.com/images/M/MV5BNDYxNjQyMjAtNTdiOS00NGYwLWFmNTAtNThmYjU5ZGI2YTI1XkEyXkFqcGdeQXVyMTMxODk2OTU@._V1_FMjpg_UX1000_.jpg",
        },
        {
            id: 2,
            "title": "Doctor Strange",
            "posterUrl": "https://upload.wikimedia.org/wikipedia/en/1/17/Doctor_Strange_in_the_Multiverse_of_Madness_poster.jpg",
        },
        {
            id: 3,
            "title": "Assassin's Creed",
            "posterUrl": "https://upload.wikimedia.org/wikipedia/id/7/77/Assassins_Creed_2_Box_Art.JPG",
        },
        {
            id: 4,
            "title": "Luke Cage",
            "posterUrl": "https://flxt.tmsimg.com/assets/p12738284_b_v13_ac.jpg",
        },
        {
            id: 5,
            "title": "Dark Phoenix",
            "posterUrl": "https://bacaterus.com/wp-content/uploads/2022/01/Review-X-Men-Dark-Phoenix_.webp",
        },
        {
            id: 6,
            "title": "Avengers Endgame",
            "posterUrl": "https://i.pinimg.com/originals/83/85/98/83859852bea0341f432a15b02e1a8edc.png",
        },
        {
            id: 7,
            "title": "Eternals",
            "posterUrl": "https://mmc.tirto.id/image/2019/07/22/eternals_ratio-16x9.jpg",
        },
        {
            id: 8,
            "title": "Raya and the Last Dragon",
            "posterUrl": "https://wallpapercave.com/wp/wp8000019.jpg",
        },
        {
            id: 9,
            "title": "Ant-Man and the Wasp",
            "posterUrl": "https://wallpapersmug.com/download/1600x900/b6cc5e/ant-man-and-the-wasp-movie-poster.jpg",
        },
        {
            id: 10,
            "title": "Aquaman",
            "posterUrl": "https://wallpapersmug.com/download/1600x900/3e73b2/aquaman-Jason-momoa-movie.jpg",
        },
        {
            id: 11,
            "title": "Avengers Infinity War",
            "posterUrl": "https://wallpapersmug.com/download/1600x900/be5725/avengers-infinity-war-movie-poster-international.jpg",
        },
        {
            id: 12,
            "title": "Deadpoll 2",
            "posterUrl": "https://wallpapersmug.com/download/1600x900/4d9385/deadpool-2-movie-poster-minimal.jpg",
        },
        {
            id: 13,
            "title": "Jurassic World: Fallen Kingdom",
            "posterUrl": "https://img.wallscloud.net/converted/987982823-jurassic-world-fallen-kingdom-8z9W-1024x1024-MM-100.jpg",
        },
        {
            id: 14,
            "title": "Pacific Rim: Uprising",
            "posterUrl": "https://wallpapersmug.com/download/1600x900/a9a9ff/4k-pacific-rim-uprising-2018-movie.jpg",
        },
        {
            id: 15,
            "title": "Ready Player One",
            "posterUrl": "https://jadwalnonton.com/data/upload/articles/2020/Ready-Player-One.jpg",
        },


    ],
    Thriller: [
        {
            id: 0,
            "title": "Breaking Bad",
            "posterUrl": "https://m.media-amazon.com/images/M/MV5BODFhZjAwNjEtZDFjNi00ZTEyLThkNzUtMjZmOWM2YjQwODFmXkEyXkFqcGdeQXVyMjQwMDg0Ng@@._V1_FMjpg_UX1000_.jpg",
        },
        {
            id: 2,
            "title": "The Third Man",
            "posterUrl": "https://images-na.ssl-images-amazon.com/images/M/MV5BMjMwNzMzMTQ0Ml5BMl5BanBnXkFtZTgwNjExMzUwNjE@._V1_SX300.jpg"
        },
        {
            id: 3,
            "title": "Black Swan",
            "posterUrl": "https://images-na.ssl-images-amazon.com/images/M/MV5BNzY2NzI4OTE5MF5BMl5BanBnXkFtZTcwMjMyNDY4Mw@@._V1_SX300.jpg"
        },
        {
            id: 4,
            "title": "The Silence of the Lambs",
            "posterUrl": "https://images-na.ssl-images-amazon.com/images/M/MV5BMTQ2NzkzMDI4OF5BMl5BanBnXkFtZTcwMDA0NzE1NA@@._V1_SX300.jpg"
        },
        {
            id: 5,
            "title": "Midnight Express",
            "posterUrl": "https://images-na.ssl-images-amazon.com/images/M/MV5BMTQyMDA5MzkyOF5BMl5BanBnXkFtZTgwOTYwNTcxMTE@._V1_SX300.jpg"
        },
        {
            id: 6,
            "title": "Morbius",
            "posterUrl": "https://pict.sindonews.net/dyn/360/pena/news/2022/03/30/700/727761/review-film-morbius-vampir-menyeramkan-dengan-cgi-payah-nsn.jpg",
        },
        {
            id: 7,
            "title": "The Invisible Man",
            "posterUrl": "https://upload.wikimedia.org/wikipedia/en/3/3a/The_Invisible_Man_%282020_film%29_-_release_poster.jpg",
        },
        {
            id: 8,
            "title": "Shirley",
            "posterUrl": "https://upload.wikimedia.org/wikipedia/en/3/30/Shirley_poster.jpeg",
        },
        {
            id: 9,
            "title": "Us",
            "posterUrl": "https://flxt.tmsimg.com/assets/p15955710_p_v8_aa.jpg",
        },
        {
            id: 10,
            "title": "Martin Eden",
            "posterUrl": "https://m.media-amazon.com/images/M/MV5BNTgzYTM5MjYtZjk2ZC00MTUxLWE1NTktYmVkZmIwNTZiMTNkXkEyXkFqcGdeQXVyMTA3MzQ4MTcw._V1_.jpg",
        },
        {
            id: 11,
            "title": "Truth or Dare",
            "posterUrl": "https://montasefilm.com/wp-content/uploads/2018/04/1600x1181_8a5aabad5b.jpg",
        },
        {
            id: 12,
            "title": "A Quit Place",
            "posterUrl": "https://wallpapersmug.com/download/1600x900/a00b73/a-quiet-place-part-2-2020.jpg",
        },
        {
            id: 13,
            "title": "Fifty Shades Freed",
            "posterUrl": "https://lh3.googleusercontent.com/uJ-GOUpYpBsdYv0q3XR5z2qE9xEvpgP6jyhpQ1Sz1MS4HKGN83egIT9Y0tGiFEH4Axt5AW6luTXIUj4cyjJBuJjPjQws2mUD9rikBudOX_fofiKCDbt7k0lZ1N9TgYaqsqGY07jju8IUuZgWRyx_NC5hKp7AsuTU_bK6HETCCFpqFdNRUCLbeCTa1HVUgTga3pczD-7qT3ZHQztQnK4PbssYuG-ucipkt6om4iUlTJTM1nH8YeSGoNIlPsyhtxIqpCmYVeRQdYrAbR3Aa4H3GodX1SgfcE7pXqACJJrDQNqgOHOb_bqp_9tqlZ3XFT0jm7b7lYskE5EwDYndVdVuc7oSknAXPEAtaEo-cYORmqPoP_Nb7odrnAokW3vwvxyKNXxz2su2UnljhZkO-JObQG2V9M8rfpp5m0d-EuKRJwy9SS9V5U0bcCMGfE167G1oAthC04SLIcJnUT59dB-y7tMlxqr0lZeZrgo-7rMd1gtlEbutAV5aiucxO8HhA4f2gwX5ZgHE30tIn64p07cR9u58CrBBKQQ9vwYDKmj9UUhVSEVmfKaNm_ZfWhM32uuxWwTmODtTW8Z3sUNtpiOrWJw7GczCEeNfiVNj_R2LFeCF7wfas4GeAgu6R4WUPOk7HJU9OfP_AeZVTKWA-EGSe2MakrEtXaA_B0YVK0YewsLU0ANYl8os_OXmnbT7RBqQDIgDL2vvy5HcCQdYYQ=w1200-h542-no",
        },
        {
            id: 14,
            "title": "Hereditary",
            "posterUrl": "https://images2.alphacoders.com/112/1122556.jpg",
        },
        {
            id: 15,
            "title": "Maze Runner: The Death Cure",
            "posterUrl": "https://cdn.wallpapersafari.com/98/16/DNcgvk.jpg",
        },
    ]
}


// menampilkan list genre berdasarkan object movies
const listGenre = document.getElementById("list-genre")
let list = ''
for (const genre in movies) {
    list += `<li><a href="#movie-list" onclick="filterMovie(this,'${genre}')">${genre}</a></li>`
}
listGenre.innerHTML = list




//recursive function untuk randomize index
function randomize(maxNumber, historyIndex) {
    let random = Math.round((Math.random() * maxNumber))
    if (!historyIndex.includes(random)) {
        return random
    } else {
        if (historyIndex.length < maxNumber) {
            return randomize(maxNumber, historyIndex)
        }
    }
}

//filter movie berdasarkan genre yang dipilih dan menambahkan element card movie yang sudah difilter
let selectedGenre = ''
function filterMovie(event, genre) {
    selectedGenre = genre
    let cardsElement = document.getElementById("cards")
    let card = ''
    let historyIndex = []
    for (let i = 0; i < 5; i++) {
        let maxNumber = movies[selectedGenre].length - 1;
        let randomNumber = randomize(maxNumber, historyIndex)
        let movieId = movies[selectedGenre][randomNumber].id
        card += `
            <div class="card">
              <div class="profile">
                <img src="${movies[selectedGenre][randomNumber].posterUrl}">
                <p>${movies[selectedGenre][randomNumber].title}</p>
                <button name = 'movie-button' id='${movieId}' value='watch' onclick='pickMovie(this,${movieId})'>Watch</button>
              </div>
            </div>`
        historyIndex.push(randomNumber)
    }
    cardsElement.innerHTML = card

    document.getElementById('btn-pick-movie').removeAttribute('style')
}


//menambahkan element untuk menyimpan movie yang dipilih
const pickedMovieElement = document.getElementById("picked-movies")
function pickMovie(evt, movieId) {
    document.getElementById(movieId).setAttribute('disabled', true)
    const movie = movies[selectedGenre][movieId]

    const pickedMovie = `
            <div class="card" id='card-${movie.id}'>
                <div class="profile">
                  <img src="${movie.posterUrl}" hceight="150"/>
                  <p>${movie.title}</p>
                  <button name='delete-movie' id='delete-${movie.id}' value='delete' onclick='deleteMovie(this, ${movie.id})'  >delete</button>
                </div>
            </div>
        `
    pickedMovieElement.innerHTML += pickedMovie
    document.getElementById('btn-repick-movie').removeAttribute('style')
}


//menghapus element dari list movie yang sudah dipilih
function deleteMovie(event, movieId) {
    const element = document.getElementById(`card-${movieId}`)
    element.remove()
    document.getElementById(movieId).removeAttribute('disabled')

}